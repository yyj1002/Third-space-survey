<!DOCTYPE html>
<html lang="zh">
<head>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Third Space Survey | ç¬¬ä¸‰ç©ºé—´è°ƒç ”</title>
<style>
  body {
    font-family: 'Helvetica', sans-serif;
    background-color: #f7f3f0;
    color: #333;
    margin: 0;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #6b4f3f;
    margin-bottom: 30px;
  }
  h2 {
    color: #6b4f3f;
    font-size: 18px;
    margin-bottom: 10px;
  }
  .question {
    margin-bottom: 30px;
    padding: 15px 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  }
  .question p {
    font-weight: bold;
    margin-bottom: 10px;
  }
  .options.priority label, .options.checkbox label {
    display: flex;
    align-items: center;
    background: #faf5f1;
    border: 1px solid #d6c6b9;
    padding: 10px 12px;
    border-radius: 6px;
    margin: 5px 0;
    cursor: pointer;
    transition: background 0.2s;
  }
  .options.priority label:hover, .options.checkbox label:hover {
    background: #f0e4db;
  }
  .options.priority .prio {
    margin-left: auto;
    font-weight: bold;
    color: #8b5e3c;
  }
  .icon {
    width: 20px;
    height: 20px;
    margin-right: 8px;
    background-color: #c9b4a3;
    border-radius: 50%;
  }
  input[type="text"], input[type="number"], select, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #d6c6b9;
    background: #fff;
    box-sizing: border-box;
  }
  input[type="range"] {
    width: 100%;
    margin-top: 10px;
  }
  textarea {
    resize: vertical;
  }
  button {
    background-color: #8b5e3c;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 20px;
    font-size: 16px;
  }
  button:hover {
    background-color: #6b4f3f;
  }
  ul.multi-sortable {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  ul.multi-sortable li {
    background-color: #faf5f1;
    border: 1px solid #d6c6b9;
    padding: 10px 12px;
    border-radius: 6px;
    margin: 5px 0;
    cursor: grab;
  }
</style>
</head>
<body>
<form id="surveyForm">
  <div class="survey-intro">
    <h1>Third Space Survey | ç¬¬ä¸‰ç©ºé—´è°ƒç ”</h1>
    <p>
      <strong>Thank you for joining!</strong><br>
      This is a small survey for my personal product design portfolio.<br>
      Iâ€™m researching how people choose <strong>study & work-friendly third places</strong> â€” such as cafÃ©s, coworking spaces, and study lounges outside of home and office.<br>
      Your responses are anonymous and only used for design research.<br>
      It takes about <strong>3 minutes</strong>. Letâ€™s begin! â˜•ğŸ’»
    </p>
    <p>
      <strong>æ„Ÿè°¢å‚ä¸ï¼</strong><br>
      æœ¬é—®å·ä¾›æˆ‘ä¸ªäººäº§å“ä½œå“é›†ç ”ç©¶ä½¿ç”¨ï¼Œæƒ³äº†è§£å¤§å®¶å¦‚ä½•é€‰æ‹© <strong>é€‚åˆå­¦ä¹  / åŠå…¬çš„ç¬¬ä¸‰ç©ºé—´</strong> â€”â€” å¦‚å’–å•¡é¦†ã€ä¹¦åº—è‡ªä¹ åŒºã€è”åˆåŠå…¬ç©ºé—´ç­‰ã€‚<br>
      é—®å·åŒ¿åï¼Œä»…ç”¨äºè®¾è®¡ç ”ç©¶ï¼Œå¤§çº¦ <strong>3 åˆ†é’Ÿ</strong>å³å¯å®Œæˆã€‚å¼€å§‹å§ï¼ â˜•ğŸ’»
    </p>
  </div>

  <div class="question">
    <p>1. Age | å¹´é¾„</p>
    <input type="text" name="age" placeholder="e.g. 28">
  </div>

  <div class="question">
    <p>2. City name that you currently live in | å½“å‰ç”Ÿæ´»çš„åŸå¸‚åç§°</p>
    <input type="text" name="city_name" placeholder="e.g. Tokyo">
  </div>

  <div class="question">
    <p>3. Time spent in this city | åœ¨å½“å‰åŸå¸‚ç”Ÿæ´»æ—¶é—´</p>
    <select name="living_time">
      <option value="1å¹´ä»¥å†…">Less than 1 year | 1å¹´ä»¥å†…</option>
      <option value="1-3å¹´">1â€“3 years | 1-3å¹´</option>
      <option value="3-5å¹´">3â€“5 years | 3-5å¹´</option>
      <option value="5å¹´ä»¥ä¸Š">More than 5 years | 5å¹´ä»¥ä¸Š</option>
    </select>
  </div>
  
  <div class="question">
    <p>4. Current situation | å½“å‰ç”Ÿæ´»çŠ¶å†µ</p>
    <select name="city_status">
      <option value="å­¦ç”ŸçŸ­ç§Ÿ">Student short-term rental | å­¦ç”ŸçŸ­ç§Ÿ</option>
      <option value="æ—…å±…">Traveling/Temporary stay | æ—…å±…</option>
      <option value="å‡ºå·®">Business trip | å‡ºå·®</option>
      <option value="å®šå±…ç§Ÿæˆ¿">Settled renting | å®šå±…ç§Ÿæˆ¿</option>
      <option value="å®šå±…ä¹°æˆ¿">Settled owning | å®šå±…ä¹°æˆ¿</option>
    </select>
  </div>

  <div class="question">
    <p>5. Weekly days working in third space | æ¯å‘¨åœ¨ç¬¬ä¸‰ç©ºé—´åŠå…¬å¤©æ•°</p>
    <select name="weekly_days">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5+">5+</option>
    </select>
  </div>

  <div class="question">
    <p>6. Do you enjoy working/studying in public spaces? | æ˜¯å¦å–œæ¬¢åœ¨å…¬å…±ç©ºé—´å­¦ä¹ /åŠå…¬</p>
    <input type="range" name="public_space_preference" min="1" max="5" value="3" step="1"
       oninput="updatePreferenceText(this.value)">
    <span id="publicPrefValue">Neutral | ä¸€èˆ¬</span>

  </div>
  

  <div class="question">
    <p>7. Facilities within 10 min walk near your usual area | å¸¸æ»ç•™åœ°åŒºæ­¥è¡Œ10åˆ†é’Ÿå¯è¾¾è®¾æ–½</p>
    <div class="options checkbox">
      <label><input type="checkbox" name="facilities" value="coffee"> Coffee shop | å’–å•¡åº—</label>
      <label><input type="checkbox" name="facilities" value="convenience"> Convenience store | è¿é”ä¾¿åˆ©åº—</label>
      <label><input type="checkbox" name="facilities" value="mall"> Shopping mall | å•†åœˆ</label>
    </div>
  </div>

  <div class="question">
    <p>8. How do you decide where to work/study if you need a spot right now? (Drag to rank) | ç°åœ¨ç«‹åˆ»æ‰¾ä¸´æ—¶å­¦ä¹ /åŠå…¬ç‚¹æ—¶çš„åå¥½ï¼ˆæ‹–æ‹½æ’åºï¼‰</p>
    <ul class="multi-sortable" id="decisionNow" name="decisionNow">
      <li>Nearest available coffee shop | æœ€è¿‘æœ‰ç©ºä½çš„å’–å•¡åº—éšä¾¿åå</li>
      <li>Check platforms with reviews | çœ‹è¯„è®ºå¹³å°æŒ‘åˆé€‚çš„åº—</li>
      <li>Familiar chain, find available seat | ç†Ÿæ‚‰è¿é”å’–å•¡åº—æ‰¾æœ‰ä½ç½®çš„</li>
      <li>Look for dedicated quiet spaces | å¯»æ‰¾ä¸“é—¨è‡ªä¹ /åŠå…¬çš„å®‰é™ç©ºé—´</li>
    </ul>
  </div>

  <div class="question">
    <p>9. How do you plan to find workspace if you have plans next few days? (Drag to rank) | æœªæ¥å‡ å¤©æœ‰å­¦ä¹ /åŠå…¬éœ€æ±‚æ—¶çš„é€‰æ‹©åå¥½ï¼ˆæ‹–æ‹½æ’åºï¼‰</p>
    <ul class="multi-sortable" id="decisionFuture" name="decisionFuture">
      <li>Nearest available coffee shop | æœ€è¿‘æœ‰ç©ºä½çš„å’–å•¡åº—éšä¾¿åå</li>
      <li>Check platforms with reviews | çœ‹è¯„è®ºå¹³å°æŒ‘åˆé€‚çš„åº—</li>
      <li>Familiar chain, find available seat | ç†Ÿæ‚‰è¿é”å’–å•¡åº—æ‰¾æœ‰ä½ç½®çš„</li>
      <li>Look for dedicated quiet spaces | å¯»æ‰¾ä¸“é—¨è‡ªä¹ /åŠå…¬çš„å®‰é™ç©ºé—´</li>
    </ul>
  </div>

  <div class="question">
    <p>10. Expected high-quality work duration each time | æ¯æ¬¡åˆ©ç”¨ç©ºé—´æ—¶éœ€è¦çš„é«˜è´¨é‡åŠå…¬æ—¶é—´</p>
	  <input type="range" name="public_space_preference" min="1" max="5" value="3" step="1"
       oninput="updatePreferenceText2(this.value)">
      <span id="durationPrefValue">2-4 hours | 2-4å°æ—¶</span>
  </div>
  
  <div class="question">
    <p>11. What are the frequencies you use nearby familiar areas or exploring popular areas in the city? | åœ¨å°±è¿‘åŒºåŸŸç¬¬ä¸‰ç©ºé—´å¤šè¿˜æ˜¯æ¢ç´¢åŸå¸‚çƒ­é—¨åŒºåŸŸ</p>
      <input type="range" name="near_explore_ratio" min="0" max="100" value="50" step="10"
       oninput="updateAreaRatio(this.value)">
  <div>
  <span id="ratioText">50% Nearby | 50% Explore</span>
  </div>

  </div>

  <div class="question">
    <p>12. Preferred tools to find workspace (Drag to rank) | å–œæ¬¢ä½¿ç”¨çš„å·¥å…·ï¼ˆæ‹–æ‹½æ’åºï¼‰</p>
    <ul class="multi-sortable" id="toolPreference" name="toolPreference">
      <li>Map | åœ°å›¾</li>
      <li>Review sites | ç‚¹è¯„ç½‘ç«™</li>
      <li>Friends recommendation | æœ‹å‹æ¨è</li>
    </ul>
  </div>

  <div class="question">
    <p>13. Factors considered when choosing a workspace (Drag to rank) | é€‰æ‹©åŠå…¬åœ°ç‚¹è€ƒè™‘å› ç´ ï¼ˆæ‹–æ‹½æ’åºï¼‰</p>
    <ul class="multi-sortable" id="workspaceFactors" name="workspaceFactors">
      <li>Noise level | å˜ˆæ‚åº¦</li>
      <li>WiFi quality | ç½‘ç»œè´¨é‡</li>
      <li>Power outlets | æ’åº§å®Œå¤‡</li>
      <li>Private/semi-private space | åŠç‹¬ç«‹ç©ºé—´</li>
      <li>Open seating | åº§ä½å¼€é˜”</li>
      <li>View & lighting | å¤–ç•Œè§†é‡/å…‰çº¿</li>
      <li>Interior style/theme | å®¤å†…è£…æ½¢ç‰¹è‰²</li>
      <li>Spontaneous small events | å¶å‘å°å‹æ´»åŠ¨</li>
    </ul>
  </div>

  <div class="question">
    <p>14. Preferred exploration mode | æ›´åå¥½å“ªç§æ¢ç´¢æ–¹å¼ï¼Ÿ</p>
      <div class="slider-labels">
        <span>Map | åœ°å›¾</span>
        <span>Filtered List | æ¡ä»¶ç­›é€‰åˆ—è¡¨</span>
      </div>
      <input type="range" name="explore_mode" min="1" max="5" step="1" value="3" class="slider">
      <div class="slider-value">Neutral | ä¸­ç«‹</div>
  </div>
  
  <div class="question">
    <p>15. Issues encountered when searching for third spaces (Optional) | è¿‡å»æœç´¢ç¬¬ä¸‰ç©ºé—´æ—¶é‡åˆ°çš„é—®é¢˜æˆ–ä¸ä¾¿ï¼ˆå¯é€‰ï¼‰</p>
    <textarea name="issues" rows="4"></textarea>
  </div>

  <div class="question">
    <p>16. Preferred features in search apps for third spaces (Drag to rank) | åå¥½åŠŸèƒ½ï¼ˆæ‹–æ‹½æ’åºï¼‰</p>
    <ul class="multi-sortable" id="featurePreference" name="featurePreference">
      <li>Filter by area | åŒºåŸŸç­›é€‰</li>
      <li>Filter by necessary facilities | å¿…è¦è®¾æ–½ç­›é€‰</li>
      <li>Show real-time availability | å®æ—¶ç©ºä½æ˜¾ç¤º</li>
      <li>Map vs Ranked list | åœ°å›¾è‡ªç”±æ¢ç´¢ / æ’è¡Œæ¦œ</li>
      <li>Extra info (environment, events, reviews) | é¢å¤–ä¿¡æ¯ï¼ˆæ°›å›´ã€æ´»åŠ¨ã€è¯„ä»·ï¼‰</li>
      <li>Reservation function | é¢„çº¦åŠŸèƒ½</li>
    </ul>
  </div>

  <button type="submit">Submit | æäº¤</button>
</form>
<!-- æäº¤æˆåŠŸæç¤ºé¡µé¢ -->
<div id="successMessage" style="display: none; text-align: center; margin-top: 50px;">
  <h2>ğŸ‰ Submission completedï¼æäº¤æˆåŠŸï¼</h2>
  <p>Thank you for contributing your insights! æ„Ÿè°¢ä½ å‚ä¸æˆ‘ä»¬çš„è°ƒç ”ï¼</p>
</div>

<!-- å¼•å…¥Firebase SDKs -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
  // ä½ çš„Firebaseé¡¹ç›®é…ç½®
  const firebaseConfig = {
    apiKey: "AIzaSyAUbhRVvFc82ZwfwdT47aGAqEhjj08ePec",
    projectId: "survey-results-14ff1",
	authDomain: "survey-results-14ff1.firebaseapp.com",
    storageBucket: "survey-results-14ff1.appspot.com",
  };

  // åˆå§‹åŒ–Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // åˆå§‹åŒ–æ‹–æ‹½æ’åº
  ['decisionNow','decisionFuture','toolPreference','workspaceFactors','featurePreference'].forEach(id=>{
    new Sortable(document.getElementById(id), {animation: 150});
	formData[id] = Array.from(document.getElementById(id).children).map(li=>li.textContent);
  });

  // è¡¨å•æäº¤
  const form = document.getElementById('surveyForm');
  form.addEventListener('submit', async function(e){
    e.preventDefault();

    const formData = {};
    this.querySelectorAll('input, select, textarea').forEach(el=>{
      if(el.type==='checkbox'){
        if(!formData[el.name]) formData[el.name]=[];
        if(el.checked) formData[el.name].push(el.value);
      } else {
        formData[el.name] = el.value;
      }
    });

    try {
      await db.collection('surveyResults').add(formData);
      // æ˜¾ç¤ºæäº¤æˆåŠŸç•Œé¢
      document.getElementById('surveyForm').style.display = 'none';
      document.getElementById('successMessage').style.display = 'block';
    } catch (err) {
      console.error('Error saving survey:', err);
      alert('Failed to submit survey. Please try again.');
    }
  });
</script>

<script>
  const prefLabels = {
    1: "Strongly disagree | å®Œå…¨ä¸å€¾å‘",
    2: "Disagree | ä¸å€¾å‘",
    3: "Neutral | ä¸€èˆ¬",
    4: "Agree | å€¾å‘",
    5: "Strongly agree | éå¸¸å€¾å‘"
  };
  
  function updatePreferenceText(val) {
    document.getElementById('publicPrefValue').textContent = prefLabels[val];
  }
</script>
<script>
  const pref2Labels = {
    1: "Less than 1 hour | 1å°æ—¶ä»¥å†…",
    2: "1-2 hours | 1-2å°æ—¶",
    3: "2-4 hours | 2-4å°æ—¶",
    4: "4-6 hours | 4-6å°æ—¶",
    5: "More than 6 hours | 6å°æ—¶ä»¥ä¸Š"
  };
  
  function updatePreferenceText2(val) {
    document.getElementById('durationPrefValue').textContent = pref2Labels[val];
  }
</script>
<script>
  function updateAreaRatio(val) {
    document.getElementById('ratioText').textContent =
      `${val}% Nearby | ${100 - val}% Explore`;
  }
</script>
<script>
  document.querySelectorAll('input[type="range"][name="explore_mode"]').forEach(slider=>{
  slider.addEventListener('input',()=>{
    const labels = {
      1: "Strongly prefer Map | å‡ ä¹åªç”¨åœ°å›¾",
      2: "Prefer Map | åå¥½åœ°å›¾",
      3: "Neutral | ä¸­ç«‹",
      4: "Prefer List | åå¥½åˆ—è¡¨",
      5: "Strongly prefer List | å‡ ä¹åªç”¨åˆ—è¡¨"
    };
    slider.nextElementSibling.textContent = labels[slider.value];
  });
});
</script>

</body>
</html>
